
Validation/cleanup:

 . From http://www.w3.org/TR/2005/WD-i18n-html-tech-lang-20050224/

   - added lang="en" to html tag generated by myhtml.xsl's add-start-html
     template.
   - added lang="en" to html tag generated by
     page.xsl, faq.xsl, dictionary.xsl, redirect.xsl, register_live.xsl,
     ahelp_index.xsl, ahelp_main.xsl, threadindex_common.xsl,
     ciao_thread.xsl, sherpa_thread.xsl, chart_thread.xsl, pog_thread.xsl

V_1_7 - 2005/03/02

Decided it was time for a "release".

TODO:
 1) consider always using "fully-specified" local URL's - ie
      "/ciao3.1/ahelp/..."
    This would help in a number of ways, mainly for the code
    rather than the user. It would allow us to add URL's to the
    hardcopy output of pages using CSS in a nice form.

    [would make the CGI script for the registration pages a lot easier]

 2) Config variables should be stored in a XML file: the location
    of the file would then be sent to the stylesheets as a parameter.
    This will simplify the publishing script (and make it easier to
    add/delete parameters).
    It also would simplify the config file read in by the publishing
    scripts, which is probably a good idea.

 3) Send in depth as a 'global' parameter, so we can avoid having
    to pass it around through all the templates. Will need to re-write
    the navbar code. Probably linked in with 1) above.

 4) Add tests of the navbar code    

 5) Can probably re-write helper.xsl and other stylesheets to get rid
    of many of the "add-start/end-XXX" templates which are very
    "un-XSL"

 6) fix the headers of all files so they contain the URL name of the page
    This means sorting out the URL parameter for thread/dictionary/faq/?
    pages

 7) can we amalgamate all the<>_thread.xsl stylesheets - ie abstract out
    the differences somehow (maybe have an external XML file with the
    contents of various parts of the thread; this could then be the same
    file as used for part 2)

 8) It appears we can not use the techniques at
      http://www.dpawson.co.uk/xsl/sect2/normalise.html
    to 'fix' the multiple EQUATION block issue with the ahelp files.

Download page updates:

For CIAO 3.1 the organisation/layout/location of the CIAO download
page was changed.

 . Instead of having /ciao/download_ciao_reg.html we now have
   /ciao/download/index.html, which is a top-level page (no
   registration).

 . From this page you can select OS-specific pages (and one for
   CALDB too) which contain the actual download links.
   . the URLs are now /cgi-gen/ciao/download_ciao_<type>.cgi
   . we no-longer need both the _reg and _src forms of the
     page, just the _src version.
     For type=caldb/atomdb we do not have a registration
     page (just to complicate matters)
     We retain the specialised register doc type for now since
     it is unclear whether we can do everything we want
     within a basic page doc type.

 . No longer need the register.xsl and list_register.xsl stylesheets.

 . As the download pages do not contain a navbar, we no longer
   need to create two versions of the navbar (change to publish.pl).
   [not 100% sure about this]

 . Links
   . changed the download link to go to the new download index page
   . added the ability to specify which download page to link to
     (in CIAO 3.1 we have separated the pages into one per OS/CALDB)

Thread pages:

 . The layout has changed slightly: subsectionlists are now handled in
   a much-more sane manner. We use div's and h3's (for the title) rather
   that ul + li's and making the titles just "strong" text.

 . The links to the CALDB release notes have been updated to match the
   new layout of the CALDB (introduced in v2.27 with CIAO 3.1)
   [the calupdate tag]

 . Amalgamated the <>_thread.xsl and <>_thread_hard.xsl stylesheets
   since we now have the hardcopy parameter.

Thread Index pages:

 . The thread index pages no longer link directly to individual scripts
   since we now only provide a single script package. For now we list
   the scripts, but do not provide any links (we could link to the
   download script page?).

 . Re-worked the layout of the index pages to remove the use of DL lists.
   The new/updated thread info has now been reduced to just including
   the icons in the header - ie we no longer say how many threads are
   new or updated (the template to do that was probably a bit 'amusing'
   from an XSL standpoint as I could have probably done it a lot more
   simply using count() on an XPATH expression).

 . Simplified the list_threadindex.xsl stylesheet so that it can be
   called without any parameters. This means that the installation
   directory has to be added onto each value returned by this stylesheet.

 . The thread index pages are now created by calling the stylesheet twice:
   once with hardcopy=0 and once with hardcopy=1.

Ahelp pages:

 . fixed an error in the CIAO 3.0 versions in which the SYNTAX block
   was not created for the hardcopy versions if it dod not exist
   (and num. params !=0)

 . Changed the layout to not use a dl list but mark up more like an
   actual text file. This should make better use of the screen/page.
   The PRE blocks used for 'text' is now marked up using CSS (although
   we still use the two-table hack for the htmldoc version).

 . Take advantage of some of the "print" classes (eg noprint) to
   improve the hardcopy output from web browsers

 . The ahelp pages (including alphabet/context indexes) are now created
   by calling the stylesheet twice: once with hardcopy=0 and once with
   hardcopy=1.

FAQ:

 . layout of index page is now more "natural" - removed one layer of
   list from the layout and use headers instead (could have used more
   div blocks though)

 . Improved parsing of errmsg tags; now use the add-highlight-pre stylesheet
   to add the styling

General pages:

 . moved to using CSS (when $hardcopy=0) for highlighted text (both
   screen output and text).

 . major re-write of the "style-handling" of links to support the
   new highlighting scheme. The new system is much-more XSL-like
   (we no longer need the add-start/end-XXX templates, at least
    for em/tt/strong).

 . Added the URL of the page to the 'header' of the file. This will not
   be seen by graphical browsers (as hidden by CSS) but will be seen by
   lynx/links/... and in print-outs from the browser.
   This is not in all pages: missing from threads/dictionary/faq/ahelp indexes
   - this is due to issues over creating multiple pages (so the url
     command-line parameter is not set)

Navbar:

 . Added support for sub-directories containing their own set of nav
   bars (some of this code is in V_1_6).

 . navbars are no longer automatically created in the 'top-level'
   directory. You need to add a <dir/> entry to the <dirs> tag
   in each <section> (adding one if it does not exist)

CSS:

 . ciao.navbar.css was renamed to ciao.ns4hack.css since this file
   is used to work around NS4 issues. Added support for ahelp
   pages.

 . added a print-media stylesheet for all pages (the cssprint
   parameter in the config file). Eventually this can replace
   the use of htmldoc to create PDF files.

Tests:

 . updated for the CIAO 3.1 changes (except for the ciao_threadindex
   tests)

V_1_6 - 2004/04/23

 Clean-up to initial CIAO 3.0 release + support for AO6 Proposal
 Threads. Creating a version since want to start on CIAO 3.1 support
 which may entail a new layout (no tables for the main page, just CSS)
 and possibly no PDF pages.

 . Links:
   . The "Watch out"/"What's new" links now have a title element which
     is displayed (on hover) by modern browsers.
   . Ahelp links now have a title attribute equal to "Ahelp: " + the
     summary of the page.

 . Ahelp Pages:
   . Index pages: name of navbar can be defined in the config file
   . Individual pages weren't using the searchssi parameter so were
     still using the old search bar

 . Navbar:
   . section labels now longer need to be a link; they can just be text

 . Code:
   . created CIAODOC.pm to contain common code used in publish.pl,
     mk_ahelp_*.pl

 . Added watchouturl to config.dat; if set then the "What's New" link
   also has a "Watchout" page link as well (for important notes/changes
   with a release)

 . Clean up so that empty parameters for the stylesheets are correctly
   passed through (rather than being lost by the shell).

 . added the publish_all.pl script. Still ratehr simple.

 . sure lots of other upgrades/enhancements. There has been a move to
   having more information in the config file ratehr than in the
   stylesheets (eg the watchouturl, imglinkicon params, ...).

 . in the middle of the move from using ahelp2html.pl to mk_ahelp_*.pl
   (* = setup, indexes, pages). Have not worked out the best location
   for the ahelp XML files and how to do the main index page.

V_1_5 - 2003/08/03

  Initial version for CIAO 3.0 release. There have been a large number
  of changes (this is a potted highlight):

  . Have started to use CSS: mainly restricted to the navigation bar
    since this is not included in the hardcopy version and htmldoc
    can not handle CSS.

  . Removed a lot of tables from the layout of the pages, using div's
    instead. We haven't completely removed them yet. We could probably
    remove them around the navbar/main text sections since it worked
    in Netscape 4.76 using div and CSS float statements - although
    there was an unexplained extra gap.

  . The navigation bar has a new look: all links are displayed
    whatever section you are in.

  . The thread pages have been re-worked:
    . support for sherpa threads: the thread index pages are now
      site "agnostic"
    . added a synopsis to each section that's displayed on the main
      page, the list of all threads, and the index for that section.
    . for the main page we no longer list the individual new
      and updated items, just listing the number of such items.
    . The "all threads" section now uses a dl rather than ul to list
      the sections.
    . The introduction & summary sections now have titles in threads.
    . The overview section has been added to replace the introduction
      section. It includes a lot more mark up to indicate
      what/why/when the thread should be used.
    . The thread pages have also seen a drastic reduction in the use
      of tables.
    . Threads which used to have a section which was actually a link
      to another thread now have a small section with a line of
      automatically-generated text that says "go to this thread",
      rather than only appearing in the contents list.
    . PDF links now generated as with other pages (ie no longer
      considered special)
    It is getting messy to keep things updated: need to publish the
    thread index page, then all the threads, then the thread index
    page to ensure that we've got all the needed information.

  . Added a "skip navigation bar" link that's only seen by non-CSS
    browsers (e.g. lynx) so that you can easily jump to the main text.
    This is particularly useful for the individual ahelp pages, where
    the navbar is a list of all the ahelp pages.

  . added a "whatsnew" tag to go to the CIAO what's new page.

  . added support for "scriptlist" tag (from Chris Stawarz's CIAO 2.3
    external script page stylesheets).

  . date handling - e.g. history/news entries should now be able to
    handle years < 2000 and >= 2000 correctly. 

  . ahelp pages have been re-worked:
    . now requires a short C++ program (list_seealso) to decode the
      ahelp database (rather than manual decoding as done previously)
    . ahelp tags now check that the page being referred to is known
      - exiting with an error if it does not.
      This means that ahelp pages *MUST* be processed before the
      other pages, in order to get the database of links in place.
    . added a context attribute to allow us to dismabiguate
      keys with multiple matches
    . HTML file name now taken from the ADDRESS block in the XML file
      rather than being set to the name of the ahelp link.
    . updated to new DTD
    . removed the hacked handling of the "bug" section (since it can
      now handle sensible markup in the new DTD)
    . made the "jump to" section more prominent and added extra links
      to it
    . the contents of the main index page (not the alphabetical or
      contextual lists) is now taken from a file rather than being
      hard-coded into the stylesheets (although it still is for the
      distribution version). Currently the location of this file is
      non-standard: should have this in the ahelp/ directory and have
      the location(s) of the XML files stored in the file.
    . the curently selected ahelp page is highlighted in the
      ahelp navigation bar
    Probably need to re-work when we get ahelp working with multiple
    directories.

  . The following would not be needed if we had a DTD!
    Added some extra checks to ensure valid HTML output: e.g. tables
    not being in p blocks, do lists only contain li tags & whitespace,
    etc. Plus some attribute checks for various links.

  . Enhanced some of the links: ahelppage can now link to the lists
    (alphabetical or contextual), scriptpage can take an id attribute.
    Need to consolidate links.

  . On the test site (asc-bak) removed the use of http://cxc.harvard.edu/
    for links. This makes the code easier to maintain and the web site
    is meant to be a valid copy of the main web site so the links
    *should* work.

  . Parameters for stylesheets are now defined in global stylesheets -
    there's one for threads and one fore everything else. This makes
    adding new parameters much easier and ensures we don't have a
    conflict with the names of parameters between different stylesheets.

  . more configurable from the configuration file, rather than having
    to edit the stylesheets: e.g. logo/text for top of the navigation
    bar, location of the CSS file, location of the search SSI file,
    location of the what's new page.
    Copyright information needs to be configurable.

  . The publishing script no longer copies non-XML files to the
    storage location since it was a waste of disk space.

  . Some improvements and updates to the tests but need more.

V_1_4 - 2003/04/03

  About to start work on CIAO 3.0 changes so want a "released" version
  for CIAO 2.3

  Fixes to V_1_3:
  . removed last traces of /data/dburke2/.. from the system (htmldoc).
    Location of xsltproc/htmldoc binaries/libs is now in the config file.
  . added the thread-storage directory back to the POG threads
    (fix for CfP5 threads)

  Updates:
  . Added an "Old News" link to the bottom of the navigation bar for
    site=CIAO
  . Added a version number and storage location to POG section of config
   file (somewhat of a hack)

V_1_3 - 2002/12/18

  Version for cycle 5 POG thread release

  Fixes to V_1_2:
   . links in the Bugs section of ahelp files were corrected
   . the date of the first news entry in the CIAO navbar should now not
     overlap into the main text under netscape 4.7 (ish)
   . removed the CIAO logo from the top of the ChaRT navigation bar

  Updates:
   . added live options for ChaRT and POG sites to the config file, the
     CIAO 2.3 release, minor fixes for extra '.cfa' in the test site
   . CIAO/ChaRT pages now have a site-specific SSI file for searching
     (rather than the default CXC one)
   . added verbose/noverbose flags to publish/ahelp2html scripts for
     debugging
   . general improvements to ahelp2html script 
   . ChaRT test site moved from iCXC to asc-bak
   . improvements to the code handling linking (could be refactored more)
   . POG links now take you to the new cycle 5 directory (/proposer/POG)
     rather than the old location (/udocs/POG/MPOG/ [or s/thing similar])

V_1_2 - 2002/10/15

  Version used for CIAO 2.2.1 web site.

  Fixes to V_1_1:
   . PDF links in faq/dictionary pages now link to the page (not the index)
   . threadlink id="foo" tags should now work again
   . faq tag now works from non site=ciao pages

  Updates:
   . added use of a config file (def=config.dat) to define in/out information
     (removes a lot of hard-coded values from publish.pl)
   . added support for format=dist to ahelp XML to HTML code
   . individual pages can be marked as not for publishing to the live site
   . added support for site=icxc (so can be used for SDS pages on iCXC)
   . the year attribute of new/updated tags now have a "year 4000" problem

V_1_1 - 2002/09/06

  Fixes for V_1_0:
   . the download pages now work with the CGI scripts
   . fixes for threadlink/page when jumping to a different site

  Updates:
   . the test site (for CIAO) is now asc-bak.harvard.edu, which simplifies
     the header/footer code a lot. For now the ChaRT pages remain on
     iCXC since asc-bak is (currently) world-accessible.
   . all pages now have a blue navbar (ie ChaRT pages)
   . added more warnings/errors when links are used incorrectly
     (most of these would be picked up by validation if we had a DTD)
   . the test headers now display the person who last published the page
     (had been removed near the end of the TRIAL versions)

V_1_0 - 2002/09/04

  Version used to create released pages. Includes:
   . more page types (eg softlink)
   . only create HTML/PDF pages if the input is newer than the existing
     output files (with --force option to override)
   . the ability to include mathematical equations written in LaTeX
     (little testing and no page uses it yet)
   . uses the ahelp2html.pl script to process ahelp files (the ahelp
     code has been completely re-written from previous versions and now
     does not need pre/post-processing, although still need to create
     "See Also" and "Index" page XML files before hand)
   . the navbar SSI files no longer contain a DOCTYPE line
   . more/improved warnings to make up for the lack of DTD/documentation
   . use of LibEXSLT functions for dates
   . numerous little improvements/clean ups

  To be included in future code:
   . ability to publish all files in current directory and below
   . automatic generation of page "header"/"footer" HTML, including
     any "Return to: index" type lines
   . thread info blocks to list files that should be copied over during
     publishing
   . support for dist=ciao for ahelp pages

TRIAL_1_5 - 2002/08/22

  Now supports CIAO threads. Note the thread code can produce too
  many hr's (eg if no summary or paramfile section).

TRIAL_1_4 - 2002/08/15

  First version with support for the POG threads (untested code)

